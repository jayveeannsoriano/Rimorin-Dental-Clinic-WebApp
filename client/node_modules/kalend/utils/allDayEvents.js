"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.parseAllDayEvents = exports.parseAllDayEvent = void 0;
const dateTimeParser_1 = require("./dateTimeParser");
const luxonHelper_1 = __importDefault(require("./luxonHelper"));
const parseAllDayEvent = (event, timezone) => {
    const startAtDateTime = (0, dateTimeParser_1.parseToDateTime)(event.startAt, timezone);
    const endAtDateTime = (0, dateTimeParser_1.parseToDateTime)(event.endAt, timezone);
    return Object.assign(Object.assign({}, event), { allDay: !luxonHelper_1.default.isSameDay(startAtDateTime, endAtDateTime) });
};
exports.parseAllDayEvent = parseAllDayEvent;
const parseAllDayEvents = (events, timezone) => {
    const result = {};
    if (!events) {
        return {};
    }
    Object.entries(events).forEach((keyValue) => {
        const eventsItems = keyValue[1];
        eventsItems.forEach((item) => {
            const dateKey = (0, dateTimeParser_1.parseToDateTime)(item.startAt, timezone).toFormat('dd-MM-yyyy');
            if (result[dateKey]) {
                result[dateKey] = [
                    ...result[dateKey],
                    ...[(0, exports.parseAllDayEvent)(item, timezone)],
                ];
            }
            else {
                result[dateKey] = [(0, exports.parseAllDayEvent)(item, timezone)];
            }
        });
    });
    return result;
};
exports.parseAllDayEvents = parseAllDayEvents;
